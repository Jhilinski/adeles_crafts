<!-- templates/products.html -->
{% extends 'base.html' %}
{% block content %}
    <h2>All Products</h2>
    {% for item in items %}
        <div class="item">
            <img src="{{ url_for('uploaded_file', filename=item.image_path) }}" alt="{{ item.name }}" width="150">
            <h4>{{ item.name }}</h4>
            <p>{{ item.description|truncate(50) }}</p>
            <p>${{ item.price }}</p>
            <a href="{{ url_for('product_detail', id=item.id) }}">View</a>
            {% if current_user.is_authenticated %}
                <a href="{{ url_for('edit_item', id=item.id) }}">Edit</a>
                <a href="{{ url_for('delete_item', id=item.id) }}" onclick="return confirm('Are you sure?')">Delete</a>
            {% endif %}
        </div>
    {% endfor %}
{% endblock %}